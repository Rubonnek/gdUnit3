<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Tools and Monitoring - GdUnit3</title> <link rel="shortcut icon" href="/gdUnit3/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/gdUnit3/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/gdUnit3/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/gdUnit3/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Tools and Monitoring | GdUnit3</title> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="Tools and Monitoring" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Tools and Monitoring" /> <meta property="og:description" content="Tools and Monitoring" /> <meta property="og:site_name" content="GdUnit3" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Tools and Monitoring" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Tools and Monitoring","headline":"Tools and Monitoring","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/gdUnit3/assets/images/logo.png"}},"url":"/gdUnit3/advanced_testing/tools/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path> <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle> <line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line> <line x1="3" y1="6" x2="21" y2="6"></line> <line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path> <polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/gdUnit3/" class="site-title lh-tight"><div class="site-logo"></div> GdUnit3</a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"> <use xlink:href="#svg-menu"></use> </svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <div class="nav-category">First Steps</div> <ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit3/first_steps/install/" class="nav-list-link">Installation</a></li><li class="nav-list-item"><a href="/gdUnit3/first_steps/settings/" class="nav-list-link">Settings</a></li><li class="nav-list-item"><a href="/gdUnit3/first_steps/firstTest/" class="nav-list-link">Your First Test</a></li></ul> <div class="nav-category"></div> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/gdUnit3/asserts/index/" class="nav-list-link">Asserts</a><ul class="nav-list "><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-string/" class="nav-list-link">String Assert</a></li><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-bool/" class="nav-list-link">Boolean Assert</a></li><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-integer/" class="nav-list-link">Integer Assert</a></li><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-float/" class="nav-list-link">Float/Double Assert</a></li><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-array/" class="nav-list-link">Array Assert</a></li><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-dictionary/" class="nav-list-link">Dictionary Assert</a></li><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-object/" class="nav-list-link">Object Assert</a></li><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-vector2/" class="nav-list-link">Vector2 Assert</a></li><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-vector3/" class="nav-list-link">Vector3 Assert</a></li><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-file/" class="nav-list-link">File Assert</a></li><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-function/" class="nav-list-link">Function/Method Assert</a></li><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-signal/" class="nav-list-link">Signal Assert</a></li><li class="nav-list-item "><a href="/gdUnit3/asserts/assert-that/" class="nav-list-link">AssertThat</a></li></ul></li></ul> <div class="nav-category"></div> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/gdUnit3/advanced_testing/index/" class="nav-list-link">Advanced Testing</a><ul class="nav-list "><li class="nav-list-item "><a href="/gdUnit3/advanced_testing/sceneRunner/" class="nav-list-link">Scene Runner</a></li><li class="nav-list-item "><a href="/gdUnit3/advanced_testing/mock/" class="nav-list-link">Mocking</a></li><li class="nav-list-item "><a href="/gdUnit3/advanced_testing/spy/" class="nav-list-link">Spying</a></li><li class="nav-list-item "><a href="/gdUnit3/advanced_testing/argument_matchers/" class="nav-list-link">Argument Matchers</a></li><li class="nav-list-item "><a href="/gdUnit3/advanced_testing/fuzzing/" class="nav-list-link">Fuzzing</a></li><li class="nav-list-item active"><a href="/gdUnit3/advanced_testing/tools/" class="nav-list-link active">Tools and Monitoring</a></li><li class="nav-list-item "><a href="/gdUnit3/advanced_testing/cmd/" class="nav-list-link">Command Line Tool</a></li><li class="nav-list-item "><a href="/gdUnit3/advanced_testing/orphan/" class="nav-list-link">Orphan Nodes</a></li></ul></li></ul> <div class="nav-category"></div> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/gdUnit3/tutorials/index/" class="nav-list-link">Tutorials</a><ul class="nav-list "><li class="nav-list-item "><a href="/gdUnit3/tutorials/tutorial_basics/" class="nav-list-link">Basics</a></li><li class="nav-list-item "><a href="/gdUnit3/tutorials/tutorial_scene_runner/" class="nav-list-link">Scene Runner</a></li></ul></li></ul> <div class="nav-category">FAQ</div> <ul class="nav-list"><li class="nav-list-item"><a href="/gdUnit3/faq/test-suite/" class="nav-list-link">Test Suite</a></li><li class="nav-list-item"><a href="/gdUnit3/faq/test-case/" class="nav-list-link">Test Case</a></li><li class="nav-list-item"><a href="/gdUnit3/faq/C%23/" class="nav-list-link">C# Support</a></li><li class="nav-list-item"><a href="/gdUnit3/faq/ci/" class="nav-list-link">Continuous Integration Testing</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search GdUnit3" aria-label="Search GdUnit3" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"> <use xlink:href="#svg-search"></use> </svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/MikeSchulze/gdUnit3" class="site-button" target="_blank" rel="noopener noreferrer" > GdUnit3 on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="">Advanced Testing</a></li> <li class="breadcrumb-nav-list-item"><span>Tools and Monitoring</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="tools-and-monitoring"> <a href="#tools-and-monitoring" class="anchor-heading" aria-labelledby="tools-and-monitoring"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> Tools and Monitoring </h1> <p>GdUnit offers numerous functions that make it easier to write tests.</p><hr /> <h3 id="error_as_string"> <a href="#error_as_string" class="anchor-heading" aria-labelledby="error_as_string"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> error_as_string </h3> <p>Map Godot error number to a readable error message. See<a href="https://docs.godotengine.org/de/stable/classes/class_@globalscope.html#enum-globalscope-error" target="_blank">Error Codes</a></p> <ul class="tab" data-tab="92fc51ae-a6f6-4244-8322-4ee6d2ae32ba" data-name="tools-error_as_string"> <li class="active"> <a href="#">GdScript </a> </li> <li> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="92fc51ae-a6f6-4244-8322-4ee6d2ae32ba" data-name="tools-error_as_string"> <li class="active"> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">func</span> <span class="n">error_as_string</span><span class="p">(</span><span class="n">error_number</span> <span class="ss">:int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="no">String</span><span class="p">:</span>
</code></pre></div></div> </li> <li> <div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">Not</span> <span class="n">yet</span> <span class="n">implemented</span><span class="p">!</span>
</code></pre></div></div> </li> </ul> <h3 id="auto_free"> <a href="#auto_free" class="anchor-heading" aria-labelledby="auto_free"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> auto_free() </h3> <p>A little helper for automatically releasing your created objects after the test execution.</p> <p><em>Objects do not manage memory. If a class inherits from Object, you will have to delete instances of it manually.</em> <em>References keep an internal reference counter so that they are automatically released when no longer in use, and only then. References therefore do not need to be freed manually with Object.free.</em></p> <p>Use <strong>auto_free()</strong> to automatically released Objects when no longer in use.</p> <ul class="tab" data-tab="e52b2dff-f4f9-493b-96dc-62c47257ced2" data-name="tools-auto_free"> <li class="active"> <a href="#">GdScript </a> </li> <li> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="e52b2dff-f4f9-493b-96dc-62c47257ced2" data-name="tools-auto_free"> <li class="active"> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">func</span> <span class="n">auto_free</span><span class="p">(</span><span class="n">obj</span> <span class="ss">:Object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="no">Object</span><span class="p">:</span>
</code></pre></div></div> </li> <li> <div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">static</span> <span class="n">T</span> <span class="n">AutoFree</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;(</span><span class="n">T</span> <span class="n">obj</span><span class="p">);</span>
</code></pre></div></div> </li> </ul> <p>Example:</p> <ul class="tab" data-tab="3279407b-ae12-4515-a768-76487c9864c1" data-name="tools-auto_free-example"> <li class="active"> <a href="#">GdScript </a> </li> <li> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="3279407b-ae12-4515-a768-76487c9864c1" data-name="tools-auto_free-example"> <li class="active"> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1"># using auto_free() on Path object to register for freeing after the test is finished</span>
    <span class="n">assert_object</span><span class="p">(</span><span class="n">auto_free</span><span class="p">(</span><span class="no">Path</span><span class="p">.</span><span class="nf">new</span><span class="p">())).</span><span class="nf">is_not_instanceof</span><span class="p">(</span><span class="no">Tree</span><span class="p">)</span>
</code></pre></div></div> </li> <li> <div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// using AutoFree() on Path object to register for freeing after the test is finished</span>
    <span class="nf">AssertObject</span><span class="p">(</span><span class="nf">AutoFree</span><span class="p">(</span><span class="k">new</span> <span class="n">Godot</span><span class="p">.</span><span class="nf">Path</span><span class="p">())).</span><span class="n">IsNotInstanceOf</span><span class="p">&lt;</span><span class="n">Godot</span><span class="p">.</span><span class="n">Tree</span><span class="p">&gt;();</span>
</code></pre></div></div> </li> </ul> <h3 id="a-small-example-test-suite-to-show-up-memory-usage-and-freeing"> <a href="#a-small-example-test-suite-to-show-up-memory-usage-and-freeing" class="anchor-heading" aria-labelledby="a-small-example-test-suite-to-show-up-memory-usage-and-freeing"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> <em>A small example test suite to show up memory usage and freeing</em> </h3> <p>Objects covered by <em>auto_free</em> live only in the scope where it is used. Scopes are: <em>test suite setup</em>, <em>test case setup</em> and <em>tests</em></p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">extends</span> <span class="no">GdUnitTestSuite</span>

    <span class="n">var</span> <span class="n">_obj_a</span><span class="p">;</span>
    <span class="n">var</span> <span class="n">_obj_b</span><span class="p">;</span>
    <span class="n">var</span> <span class="n">_obj_c</span><span class="p">;</span>

    <span class="c1"># Scope test suite setup</span>
    <span class="n">func</span> <span class="n">before</span><span class="p">():</span>
        <span class="n">_obj_a</span> <span class="o">=</span> <span class="n">auto_free</span><span class="p">(</span><span class="no">Node</span><span class="p">.</span><span class="nf">new</span><span class="p">())</span>
        <span class="n">print_obj_usage</span><span class="p">(</span><span class="s2">"before"</span><span class="p">)</span>

    <span class="c1"># Scope test case setup</span>
    <span class="n">func</span> <span class="n">before_test</span><span class="p">():</span>
        <span class="n">_obj_b</span> <span class="o">=</span> <span class="n">auto_free</span><span class="p">(</span><span class="no">Node</span><span class="p">.</span><span class="nf">new</span><span class="p">())</span>
        <span class="n">print_obj_usage</span><span class="p">(</span><span class="s2">"before_test"</span><span class="p">)</span>

    <span class="c1"># Scope test</span>
    <span class="n">func</span> <span class="nb">test</span><span class="p">():</span>
        <span class="n">_obj_c</span> <span class="o">=</span> <span class="n">auto_free</span><span class="p">(</span><span class="no">Node</span><span class="p">.</span><span class="nf">new</span><span class="p">())</span>
        <span class="c1"># _obj_a still lives here</span>
        <span class="c1"># _obj_b still lives here</span>
        <span class="c1"># _obj_b still lives here</span>
        <span class="n">print_obj_usage</span><span class="p">(</span><span class="s2">"test"</span><span class="p">)</span>

    <span class="c1"># Scope test case setup</span>
    <span class="n">func</span> <span class="n">after_test</span><span class="p">():</span>
        <span class="c1"># _obj_a still lives here</span>
        <span class="c1"># _obj_b still lives here</span>
        <span class="c1"># _obj_c is freed</span>
        <span class="n">print_obj_usage</span><span class="p">(</span><span class="s2">"after_test"</span><span class="p">)</span>
        
    <span class="c1"># Scope test suite setup</span>
    <span class="n">func</span> <span class="n">after</span><span class="p">():</span>
        <span class="c1"># _obj_a still lives here</span>
        <span class="c1"># _obj_b is auto freed</span>
        <span class="c1"># _obj_c is freed</span>
        <span class="n">print_obj_usage</span><span class="p">(</span><span class="s2">"after"</span><span class="p">)</span>

    <span class="n">func</span> <span class="n">_notification</span><span class="p">(</span><span class="n">what</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">what</span> <span class="o">==</span> <span class="no">NOTIFICATION_PATH_CHANGED</span><span class="p">:</span>
            <span class="n">print_header</span><span class="p">()</span>
        <span class="ss">else:
            </span><span class="n">print_obj_usage</span><span class="p">(</span><span class="no">GdObjects</span><span class="p">.</span><span class="nf">notification_as_string</span><span class="p">(</span><span class="n">what</span><span class="p">))</span>

    <span class="n">func</span> <span class="n">print_header</span><span class="p">()</span> <span class="p">:</span>
        <span class="n">prints</span><span class="p">(</span><span class="s2">"|%16s | %16s | %16s | %16s |"</span> <span class="o">%</span> <span class="p">[</span><span class="s2">""</span><span class="p">,</span> <span class="s2">"_obj_a"</span><span class="p">,</span> <span class="s2">"_obj_b"</span><span class="p">,</span> <span class="s2">"_obj_c"</span><span class="p">])</span>
        <span class="n">prints</span><span class="p">(</span><span class="s2">"----------------------------------------------------------------------------"</span><span class="p">)</span>

    <span class="n">func</span> <span class="n">print_obj_usage</span><span class="p">(</span><span class="nb">name</span> <span class="ss">:String</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">prints</span><span class="p">(</span><span class="s2">"|%16s | %16s | %16s | %16s |"</span> <span class="o">%</span> <span class="p">[</span><span class="nb">name</span><span class="p">,</span> <span class="n">_obj_a</span><span class="p">,</span> <span class="n">_obj_b</span><span class="p">,</span> <span class="n">_obj_c</span><span class="p">])</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|                 |           _obj_a |           _obj_b |           _obj_c |
----------------------------------------------------------------------------
|        PARENTED |             Null |             Null |             Null |
|      ENTER_TREE |             Null |             Null |             Null |
| POST_ENTER_TREE |             Null |             Null |             Null |
|           READY |             Null |             Null |             Null |
|          before |      [Node:1515] |             Null |             Null |
|     before_test |      [Node:1515] |      [Node:1519] |             Null |
|            test |      [Node:1515] |      [Node:1519] |      [Node:1521] |
|      after_test |      [Node:1515] |      [Node:1519] | [Deleted Object] |
|           after |      [Node:1515] | [Deleted Object] | [Deleted Object] |
|       EXIT_TREE | [Deleted Object] | [Deleted Object] | [Deleted Object] |
|      UNPARENTED | [Deleted Object] | [Deleted Object] | [Deleted Object] |
|       PREDELETE | [Deleted Object] | [Deleted Object] | [Deleted Object] |
</code></pre></div></div> <h3 id="create_temp_dir"> <a href="#create_temp_dir" class="anchor-heading" aria-labelledby="create_temp_dir"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> create_temp_dir </h3> <p>Creates a new directory under the temporary directory <em>user://tmp</em>.</p> <p>Useful for storing data during test execution. The directory is automatically deleted after the execution of the test suite.</p> <ul class="tab" data-tab="79106f17-c9f5-4d1f-8c76-3db12d45f799" data-name="tools-create_temp_dir"> <li class="active"> <a href="#">GdScript </a> </li> <li> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="79106f17-c9f5-4d1f-8c76-3db12d45f799" data-name="tools-create_temp_dir"> <li class="active"> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">func</span> <span class="n">create_temp_dir</span><span class="p">(</span><span class="n">relative_path</span> <span class="ss">:String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="no">String</span><span class="p">:</span>
</code></pre></div></div> </li> <li> <div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kt">string</span> <span class="nf">CreateTempDir</span><span class="p">(</span><span class="kt">string</span> <span class="n">path</span><span class="p">);</span>
</code></pre></div></div> </li> </ul> <p>Example:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">func</span> <span class="n">test_save_game_data</span><span class="p">():</span>
        <span class="c1"># create a temporay directory to store test data</span>
        <span class="n">var</span> <span class="n">temp_dir</span> <span class="p">:</span><span class="o">=</span> <span class="n">create_temp_dir</span><span class="p">(</span><span class="s2">"examples/game/save"</span><span class="p">)</span>
        <span class="n">var</span> <span class="n">file_to_save</span> <span class="p">:</span><span class="o">=</span> <span class="n">temp_dir</span> <span class="o">+</span> <span class="s2">"/save_game.dat"</span>
        
        <span class="n">var</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'user'</span><span class="p">:</span> <span class="s2">"Hoschi"</span><span class="p">,</span>
            <span class="s1">'level'</span><span class="p">:</span> <span class="mi">42</span>
        <span class="p">}</span>
        <span class="n">var</span> <span class="n">file</span> <span class="p">:</span><span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span>
        <span class="n">file</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">file_to_save</span><span class="p">,</span> <span class="no">File</span><span class="o">.</span><span class="no">WRITE</span><span class="p">)</span>
        <span class="n">file</span><span class="p">.</span><span class="nf">store_line</span><span class="p">(</span><span class="no">JSON</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="n">file</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
        
            <span class="c1"># the data is saved at "user://tmp/examples/game/save/save_game.dat"</span>
        <span class="n">assert_bool</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="nf">file_exists</span><span class="p">(</span><span class="n">file_to_save</span><span class="p">)).</span><span class="nf">is_true</span><span class="p">()</span>
</code></pre></div></div> <h3 id="clean_temp_dir"> <a href="#clean_temp_dir" class="anchor-heading" aria-labelledby="clean_temp_dir"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> clean_temp_dir </h3> <p>Deletes the temporary directory.</p> <p>Is called automatically after each execution of the test suite.</p> <ul class="tab" data-tab="8607cff8-e9c9-466d-a519-2e7061b9473b" data-name="tools-clean_temp_dir"> <li class="active"> <a href="#">GdScript </a> </li> <li> <a href="#">C# </a> </li> </ul> <ul class="tab-content" id="8607cff8-e9c9-466d-a519-2e7061b9473b" data-name="tools-clean_temp_dir"> <li class="active"> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="n">func</span> <span class="n">clean_temp_dir</span><span class="p">():</span>
</code></pre></div></div> </li> <li> <div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">void</span> <span class="nf">ClearTempDir</span><span class="p">();</span>
</code></pre></div></div> </li> </ul> <h3 id="create_temp_file"> <a href="#create_temp_file" class="anchor-heading" aria-labelledby="create_temp_file"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> create_temp_file </h3> <p>Creates a new File under the temporary directory <em>user://tmp</em> + &lt;relative_path&gt; with given name &lt;file_name&gt; and given file &lt;mode&gt; (default = File.WRITE).</p> <p>If success the returned File is automatically closed after the execution of the test suite.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">func</span> <span class="n">create_temp_file</span><span class="p">(</span><span class="n">relative_path</span> <span class="ss">:String</span><span class="p">,</span> <span class="n">file_name</span> <span class="ss">:String</span><span class="p">,</span> <span class="n">mode</span> <span class="p">:</span><span class="o">=</span><span class="no">File</span><span class="o">.</span><span class="no">WRITE</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="no">File</span><span class="p">:</span>
</code></pre></div></div> <p>Example: We create a small test file in the beginning of a test suite on <em>before()</em> and read it later on the test. It is not need to close the file (e.g. you forgot it to close), the GdUnit test runner will close it automaticaly.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1"># setup test data</span>
    <span class="n">func</span> <span class="n">before</span><span class="p">():</span>
        <span class="c1"># opens a tmp file with WRITE mode under "user://tmp/examples/game/game.sav" (auto closed)</span>
        <span class="n">var</span> <span class="n">file</span> <span class="p">:</span><span class="o">=</span> <span class="n">create_temp_file</span><span class="p">(</span><span class="s2">"examples/game"</span><span class="p">,</span> <span class="s2">"game.sav"</span><span class="p">)</span>
        <span class="n">assert_object</span><span class="p">(</span><span class="n">file</span><span class="p">).</span><span class="nf">is_not_null</span><span class="p">()</span>
        <span class="c1"># write some example data</span>
        <span class="n">file</span><span class="p">.</span><span class="nf">store_line</span><span class="p">(</span><span class="s2">"some data"</span><span class="p">)</span>
        <span class="c1"># not needs to be manually close, will be auto closed before test execution</span>
        
    <span class="n">func</span> <span class="n">test_create_temp_file</span><span class="p">():</span>
        <span class="c1"># opens the stored tmp file with READ mode under "user://tmp/examples/game/game.sav" (auto closed)</span>
        <span class="n">var</span> <span class="n">file_read</span> <span class="p">:</span><span class="o">=</span> <span class="n">create_temp_file</span><span class="p">(</span><span class="s2">"examples/game"</span><span class="p">,</span> <span class="s2">"game.sav"</span><span class="p">,</span> <span class="no">File</span><span class="o">.</span><span class="no">READ</span><span class="p">)</span>
        <span class="n">assert_object</span><span class="p">(</span><span class="n">file_read</span><span class="p">).</span><span class="nf">is_not_null</span><span class="p">()</span>
        <span class="n">assert_str</span><span class="p">(</span><span class="n">file_read</span><span class="p">.</span><span class="nf">get_as_text</span><span class="p">()).</span><span class="nf">is_equal</span><span class="p">(</span><span class="s2">"some data</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
        <span class="c1"># not needs to be manually close, will be auto closed after test suite execution</span>
</code></pre></div></div> <h3 id="resource_as_array"> <a href="#resource_as_array" class="anchor-heading" aria-labelledby="resource_as_array"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> resource_as_array </h3> <p>Reads a resource by given path &lt;resource_path&gt; into an pooled string array.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">func</span> <span class="n">resource_as_array</span><span class="p">(</span><span class="n">resource_path</span> <span class="ss">:String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="no">PoolStringArray</span><span class="p">:</span>
</code></pre></div></div> <p>Example:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">var</span> <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"row a"</span><span class="p">,</span> <span class="s2">"row b"</span><span class="p">]</span>
	<span class="n">var</span> <span class="n">file_content</span> <span class="p">:</span><span class="o">=</span> <span class="n">resource_as_array</span><span class="p">(</span><span class="s2">"res://myproject/test/resources/TestRows.txt"</span><span class="p">)</span>
	<span class="n">assert_array</span><span class="p">(</span><span class="n">rows</span><span class="p">).</span><span class="nf">contains_exactly</span><span class="p">(</span><span class="n">file_content</span><span class="p">)</span>
</code></pre></div></div> <h3 id="resource_as_string"> <a href="#resource_as_string" class="anchor-heading" aria-labelledby="resource_as_string"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> resource_as_string </h3> <p>Reads a resource by given path &lt;resource_path&gt; and returned the content as String.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">func</span> <span class="n">resource_as_string</span><span class="p">(</span><span class="n">resource_path</span> <span class="ss">:String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="no">String</span><span class="p">:</span>
</code></pre></div></div> <p>Example:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">var</span> <span class="n">rows</span> <span class="o">=</span> <span class="s2">"row a</span><span class="se">\n</span><span class="s2">row b</span><span class="se">\n</span><span class="s2">"</span>
	<span class="n">var</span> <span class="n">file_content</span> <span class="p">:</span><span class="o">=</span> <span class="n">resource_as_string</span><span class="p">(</span><span class="s2">"res://myproject/test/resources/TestRows.txt"</span><span class="p">)</span>
	<span class="n">assert_string</span><span class="p">(</span><span class="n">rows</span><span class="p">).</span><span class="nf">is_equal</span><span class="p">(</span><span class="n">file_content</span><span class="p">)</span>
</code></pre></div></div> <h2 id="monitoring"> <a href="#monitoring" class="anchor-heading" aria-labelledby="monitoring"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> Monitoring </h2> <hr /> <h3 id="orphan-nodes-or-leaking-memory"> <a href="#orphan-nodes-or-leaking-memory" class="anchor-heading" aria-labelledby="orphan-nodes-or-leaking-memory"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> Orphan Nodes or leaking Memory </h3> <p>In Godot, objects that are not freed are called <em>orphan nodes</em>. When you start writing a test, you often have no way of knowing whether all of the objects you created were properly shared after the test was run. One helping tool is using <strong>auto_free</strong> to manage your object.</p> <p>GdUnit will help you by reporting detected orphan nodes for each test run in the status bar. A green icon indicates no orphan nodes detected and a red blinking icon warns you to have detected orphan nodes.</p> <p><img src="/gdUnit3/assets/images/monitoring/orphan-nodes.png" alt="" /></p> <p>Use the button to jump to the first orphan node to inspect. Orphan nodes are reported and marked in yellow for each test step as before(), before_test() and the test itself.</p> <p>I recommend checking your implementation if any orphan nodes are detected, follow the guide to fix.</p> <h3 id="test-execution-time"> <a href="#test-execution-time" class="anchor-heading" aria-labelledby="test-execution-time"><svg viewBox="0 0 16 16" aria-hidden="true"> <use xlink:href="#svg-link"></use> </svg></a> Test Execution Time </h3> <p>On the status bar at the bottom left the total elapsed execution time is shown. The execution time is messured to for each testsuite and testcase and can be read on each element in the tree inspector.</p> <p><img src="/gdUnit3/assets/images/monitoring/execution-time.png" alt="" /></p> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2021-2022 Mike Schulze. Distributed by an <a href="https://github.com/MikeSchulze/gdUnit3/blob/master/LICENSE">MIT license.</a></p> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="/gdUnit3/assets/js/tabs.js"></script> <link rel="stylesheet" href="/gdUnit3/assets/css/tab.css" /> <link rel="stylesheet" href="/gdUnit3/assets/css/site-header.css" /> </body> </html>
